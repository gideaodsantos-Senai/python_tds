{% extends "base.html" %}

{% block title %}Products - Clothing Store{% endblock %}

{% block content %}
<section class="container">
    <h1>Our Products</h1>
    <form method="GET" action="{{ url_for('products') }}" class="mb-md">
        <div class="form-group">
            <label for="q">Search:</label>
            <input type="text" id="q" name="q" value="{{ query }}" placeholder="Search products...">
        </div>
        <div class="form-group">
            <label for="category">Category:</label>
            <select id="category" name="category">
                <option value="">All Categories</option>
                {% for cat in categories %}
                <option value="{{ cat }}" {% if cat == category %}selected{% endif %}>{{ cat }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="min_price">Min Price:</label>
            <input type="number" id="min_price" name="min_price" step="0.01" value="{{ min_price }}">
        </div>
        <div class="form-group">
            <label for="max_price">Max Price:</label>
            <input type="number" id="max_price" name="max_price" step="0.01" value="{{ max_price }}">
        </div>
        <button type="submit" class="btn">Search</button>
    </form>
    <div class="grid">
        {% for product in products %}
        <article class="card">
            <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
            <div class="card-content">
                <h3>{{ product.name }}</h3>
                <p>{{ product.description[:50] }}...</p>
                <p class="price">${{ "%.2f"|format(product.price) }}</p>
                <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn">View Details</a>
            </div>
        </article>
        {% endfor %}
    </div>
</section>
{% endblock %}
